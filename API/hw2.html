<!DOCTYPE html>
<html>

<head>
</head>

<style type="text/css">
	input, textarea {
    		display: inline-block;
	}

	textarea {

	}

	.output {
		font-family: monospace;
	}
</style>

<body>

	<textarea id="code" cols=80 rows=24></textarea>
    	<br>
    	<br>
	<select id="hw_type">
		<option value="c">C</option>
		<option value="bash">Bash</option>
		<option value="written">Written</option>
	</select>
	<br>
	<br>
    	<input type="button" value="Submit" id="submit">
    	<br>
	<br>
	<div id="output"></div>

    	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

    	<script type="text/javascript">
		var hw_num = 2;

		//send user code to script
	    	$('#submit').on('click', function() {
			var langid = $('#hw_type').val();
			var code = $('#code').val();

			var json = {
            			type: langid,
            			content: code,
				hw_num: hw_num 
        		};

	        	console.log(json);

	        	$.post("/grade", json, function(data, error) {
				if (data) { 
					$('#output').css('color', 'green').html("PASSED"); 
					return;
				} else $('#output').css('color', 'red').html("FAILED");
	
				console.log(error);				

				if (error) {
					$('#output').html(error);
				}
	        	});
	    	});
    	</script>
</body>

</html>
