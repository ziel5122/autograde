<!DOCTYPE html>
<html>

<head>
</head>

<style type="text/css">
	input, textarea {
    		display: inline-block;
	}

	textarea {

	}

	.output {
		font-family: monospace;
	}
</style>

<body>
	<h2>Homework 6 Grading Portal</h2>
	<h3 id='message' style="color:red"></h3>
	<textarea id="code" cols=80 rows=24></textarea>
    	<br>
    	<br>
	<select id="hw_type">
		<option value="freesize">freesize.awk</option>
		<option value="count_allocs">count_allocs.awk</option>
		<option value="num_bytes">num_bytes.awk</option>
		<option value="succ_reqs">succ_reqs.awk</option>
		<option value="list_sizes">list_sizes.awk</option>
	</select>
	<br>
	<br>
    	<input type="button" value="Submit" id="submit">
    	<br>
	<br>
	<div id="output"></div>

    	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

    	<script type="text/javascript">
			var hw_num = 6;
			var class_code = 'cst334';

			//send user code to script
	    	$('#submit').on('click', () => {
				var hw_type = $('#hw_type').val();
				var code = $('#code').val();

				var json = {
        			type: hw_type,
          			content: code,
					hw_num: hw_num,
					class_code: class_code
		    	};

				console.log(json);

				$.post("/grade", json, (data, error) => {
					if (data.output == 'SUCCESS')
						$('#output').css('color', 'green');
					else $('#output').css('color', 'red');
				
					$('#output').html(data.output + ' ' + data.time);
				});
	    	});

			switch($('#hw_type').val()) {
				case 'reading':
					$('#message').html('Copy all of the text starting at &apos;#@ 1a&apos;'); break;
				default: 
					$('#message').html(' '); break;
			}

			$('#hw_type').on('change', () => {
				switch($('#hw_type').val()) {
					case 'reading':
						$('#message').html('Copy all of the text starting at &apos;#@ 1a&apos;'); break;
					default: 
						$('#message').html('Copy the entire awk file'); break;
				}
			});
    	</script>
</body>

</html>
